(this["webpackJsonpreact-clear-cache-example"]=this["webpackJsonpreact-clear-cache-example"]||[]).push([[0],[,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return v}));var r=n(0),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)};function o(e,t,n,r){return new(n||(n=Promise))((function(c,o){function a(e){try{i(r.next(e))}catch(t){o(t)}}function u(e){try{i(r.throw(e))}catch(t){o(t)}}function i(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,c,o,a={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(c=2&o[0]?r.return:o[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,o[1])).done)return c;switch(r=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(c=(c=a.trys).length>0&&c[c.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){a.label=o[1];break}if(6===o[0]&&a.label<c[1]){a.label=c[1],c=o;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(o);break}c[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var u={},i=function(e,t,n){return u[e]||(u[e]={callbacks:[],value:n}),u[e].callbacks.push(t),{deregister:function(){var n=u[e].callbacks,r=n.indexOf(t);r>-1&&n.splice(r,1)},emit:function(n){u[e].value!==n&&(u[e].value=n,u[e].callbacks.forEach((function(e){t!==e&&e(n)})))}}};function l(t,n){if(void 0===n&&(n="undefined"!=typeof e&&e.localStorage?e.localStorage:"undefined"!=typeof globalThis&&globalThis.localStorage?globalThis.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:"undefined"!=typeof localStorage?localStorage:null),n){var c=(o=n,{get:function(e,t){var n=o.getItem(e);return null==n?"function"==typeof t?t():t:JSON.parse(n)},set:function(e,t){o.setItem(e,JSON.stringify(t))}});return function(n){return function(t,n,c){var o=c.get,a=c.set,u=Object(r.useRef)(null),l=Object(r.useState)((function(){return o(n,t)})),s=l[0],f=l[1];(function(t,n,c,o){void 0===c&&(c=e),void 0===o&&(o={});var a=Object(r.useRef)(),u=o.capture,i=o.passive,l=o.once;Object(r.useEffect)((function(){a.current=n}),[n]),Object(r.useEffect)((function(){if(c&&c.addEventListener){var e=function(e){return a.current(e)},n={capture:u,passive:i,once:l};return c.addEventListener(t,e,n),function(){c.removeEventListener(t,e,n)}}}),[t,c,u,i,l])})("storage",(function(e){if(e.key===n){var t=JSON.parse(e.newValue);s!==t&&f(t)}})),Object(r.useEffect)((function(){return u.current=i(n,f,t),function(){u.current.deregister()}}),[t,n]);var p=Object(r.useCallback)((function(e){var t="function"==typeof e?e(s):e;a(n,t),f(t),u.current.emit(e)}),[s,a,n]);return[s,p]}(n,t,c)}}var o;return r.useState}var s,f={duration:6e4,auto:!1,storageKey:"APP_VERSION",basePath:"",filename:"meta.json"},p=Object(r.createContext)({}),d=function(e){var t=e.children,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n}(e,["children"]),c=b(n);return Object(r.createElement)(p.Provider,{value:c},t)},v=function(){return Object(r.useContext)(p)},b=function(e){var t=c({},f,e),n=t.duration,u=t.auto,i=t.storageKey,p=t.basePath,d=t.filename,v=Object(r.useState)(!0),b=v[0],h=v[1],m=l(i)(""),w=m[0],y=m[1],g=Object(r.useState)(!0),O=g[0],E=g[1],j=Object(r.useState)(w),S=j[0],x=j[1];function k(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,y(e)];case 1:return t.sent(),[2]}}))}))}var P=function(e){return o(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return"caches"in window?[4,window.caches.keys()]:[3,3];case 1:return t=n.sent(),[4,Promise.all(t.map((function(e){window.caches.delete(e)})))];case 2:n.sent(),n.label=3;case 3:return[4,k(e||S)];case 4:return n.sent(),window.location.replace(window.location.href),[2]}}))}))},I=p.replace(/\/+$/,"")+"/"+d;function L(){try{fetch(I,{cache:"no-store"}).then((function(e){return e.json()})).then((function(e){var t=e.version,n=t===w;n||u?!n&&u?P(t):(E(!0),h(!1)):(x(t),h(!1),w?E(!1):k(t))})).catch((function(e){console.log("e",e)}))}catch(e){console.error(e)}}Object(r.useEffect)((function(){return s=setInterval((function(){return L()}),n),function(){clearInterval(s)}}),[b]);var N=Object(r.useRef)((function(){})),C=Object(r.useRef)((function(){}));return N.current=function(){window.navigator.onLine&&(s=setInterval((function(){return L()}),n))},C.current=function(){clearInterval(s)},Object(r.useEffect)((function(){window.addEventListener("focus",N.current),window.addEventListener("blur",C.current)}),[]),Object(r.useEffect)((function(){L()}),[]),{loading:b,isLatestVersion:O,emptyCacheStorage:P,latestVersion:S}}}).call(this,n(10))},,,function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},function(e,t,n){e.exports=n(13)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(3),a=n.n(o),u=n(1),i=(n(11),n(4)),l=n.n(i),s=(n(12),function(){var e=Object(u.b)(),t=e.isLatestVersion,n=e.emptyCacheStorage;return r.createElement("div",{className:"App"},r.createElement("header",{className:"App-header"},r.createElement("p",null,r.createElement("img",{src:l.a,className:"App-logo",alt:"logo"})),r.createElement("p",null,r.createElement("strong",null,"Is latest version"),": ",t?"Yes":"No"),!t&&r.createElement("p",null,r.createElement("a",{href:"#clear",onClick:function(e){e.preventDefault(),n()}},"Update version")),r.createElement("p",null,"Edit ",r.createElement("code",null,"src/App.tsx")," and save to reload.")))});a.a.render(c.a.createElement(u.a,{duration:5e3,filename:"build.json"},c.a.createElement(s,null)),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.ad03ed07.chunk.js.map